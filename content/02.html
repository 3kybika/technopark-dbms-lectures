---
title: Лекция 2
description: |
  Проектирование баз данных. Модификация и выборка данных (начало).

   - Введение в проектирование баз данных:
     - Почему проект БД может быть плохим?
     - Проектирование БД;
     - Нормализация и нормальные формы;
     - Первичный ключ;
     - Типы данных.
   - Введение в SQL:
     - CREATE TABLE;
     - ALTER TABLE;
     - SELECT;
     - INSERT;
     - UPDATE;
     - DELETE.
   - Немного про JOIN-ы;
   - Обзор INFORMATION_SCHEMA;
   - Иерархические структуры в базах данных.
---
<section class="slide">
    <h2>Проектирования БД</h2>
    <dl>
        <dt>Проектирование баз данных</dt>
        <dd>Процесс создания схемы базы данных и определения необходимых ограничений целостности.</dd>
    </dl>
    <div style="text-align: center">
        <img style="height: 300px" src="not-so-easy.jpg"/>
    </div>
</section>

<section class="slide">
    <h2>Основные задачи</h2>
    <ul>
        <li>Обеспечение хранения в БД всей необходимой информации.</li>
        <li> Обеспечение возможности получения данных по всем необходимым запросам.</li>
        <li>Сокращение избыточности и дублирования данных.</li>
        <li>Обеспечение целостности данных (правильности их содержания): исключение противоречий в содержании данных,
            исключение их потери и т.д.
        </li>
    </ul>
</section>

<section class="slide">
    <figure style="font-size: 150%; margin-top: 100px">
        <blockquote>Сложная система, спроектированная наспех, никогда не работает, и исправить ее, чтобы заставить
            работать, невозможно.
        </blockquote>
        <figcaption>Законы Мерфи.<br/>16-й закон систематики
        </figcaption>
    </figure>
</section>

<section class="slide">
    <h2>Особенности концептуального проектирования</h2>
    <img style="height: 400px; float: right" src="change-cost.png"/>
    <figure class="next">
        <blockquote>Трудно что-либо предвидеть, а уж особенно будущее.</blockquote>
        <figcaption>Нильс Бор</figcaption>
    </figure>
    <ul>
        <li>Максимум командной работы;</li>
        <li>Привлечение наиболее опытных специалистов;</li>
        <li>Заглядываем в будущее.</li>
    </ul>
</section>

<section class="slide">
    <h2>Этапы проектирования</h2>
    <div style="text-align: center">
        <img src="scheme-01.png" style="width: 450px"/>
    </div>
    <dl>
        <dt>Внешнее представление (внешняя схема) данных</dt>
        <dd>Совокупностью требований со стороны конкретной функции, выполняемой пользователем.</dd>
        <dt>Концептуальная схема</dt>
        <dd>Полная совокупностью всех требований к данным, полученной из пользовательских представлений о реальном
            мире.
        </dd>
        <dt>Внутренняя схема</dt>
        <dd>Сама база данных.</dd>
    </dl>
</section>

<section class="slide">
    <h2>Инфологическое проектирование</h2>
    <dl>
        <dt>Концептуальное (инфологическое) проектирование</dt>
        <dd>Построение семантической модели предметной области, то есть информационной модели наиболее высокого уровня
            абстракции.
        </dd>
    </dl>
    <img src="scheme-02.png" style="float: right"/>
    <br/>
    <ul>
        <li>сущности</li>
        <li>атрибуты</li>
        <li>связи</li>
    </ul>
</section>

<section class="slide">
    <h2>Логическое проектирование</h2>
    <dl>
        <dt>Логическое (даталогическое) проектирование</dt>
        <dd>Создание схемы базы данных на основе конкретной модели данных, например, реляционной модели данных.</dd>
    </dl>
    <img src="scheme-03.jpg" style="float: right"/>
    <br/>
    <ul>
        <li>записи</li>
        <li>элементы данных</li>
        <li>связи между записями</li>
    </ul>
</section>

<section class="slide">
    <h2>Физическое проектирование</h2>
    <dl>
        <dt>Физическое проектирование</dt>
        <dd>Создание схемы базы данных для конкретной СУБД.</dd>
    </dl>
    <img src="scheme-04.jpg" style="float: right"/>
    <br/>
    <ul>
        <li>группирование данных</li>
        <li>индексы</li>
        <li>методы доступа</li>
    </ul>
</section>

<section class="slide">
    <h2>Почему проект БД может быть плохим?</h2>
    <table class="classic bordered" style="font-size: 67%">
        <thead>
        <tr>
            <th>Блюдо</th>
            <th>Вид</th>
            <th>Дата</th>
            <th>Продукт</th>
            <th>Калорийность</th>
            <th>Вес (г)</th>
            <th>Поставщик</th>
            <th>Город</th>
            <th>Страна</th>
            <th>Цена ($)</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Лобио</td>
            <td>Закуска</td>
            <td>01.09.2012</td>
            <td>Фасоль</td>
            <td align="right">307</td>
            <td align="right">200</td>
            <td>&quot;Хуанхэ&quot;</td>
            <td>Пекин</td>
            <td>Китай</td>
            <td align="right">0.37</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Лук</td>
            <td align="right">45</td>
            <td align="right">40</td>
            <td>&quot;Наталка&quot;</td>
            <td>Киев</td>
            <td>Украина</td>
            <td align="right">0.52</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Масло</td>
            <td align="right">742</td>
            <td align="right">30</td>
            <td>&quot;Лайма&quot;</td>
            <td>Рига</td>
            <td>Латвия</td>
            <td align="right">1.55</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Зелень</td>
            <td align="right">18</td>
            <td align="right">10</td>
            <td>&quot;Даугава&quot;</td>
            <td>Рига</td>
            <td>Латвия</td>
            <td align="right">0.99</td>
        </tr>
        <tr>
            <td>Борщ</td>
            <td>Суп</td>
            <td>01.09.2012</td>
            <td>Мясо</td>
            <td align="right">166</td>
            <td align="right">80</td>
            <td>&quot;Наталка&quot;</td>
            <td>Киев</td>
            <td>Украина</td>
            <td align="right">2.18</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Лук</td>
            <td align="right">45</td>
            <td align="right">30</td>
            <td>&quot;Наталка&quot;</td>
            <td>Киев</td>
            <td>Украина</td>
            <td align="right">0.52</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Томаты</td>
            <td align="right">24</td>
            <td align="right">40</td>
            <td>&quot;Полесье&quot;</td>
            <td>Киев</td>
            <td>Украина</td>
            <td align="right">0.45</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Рис</td>
            <td align="right">334</td>
            <td align="right">50</td>
            <td>&quot;Хуанхэ&quot;</td>
            <td>Пекин</td>
            <td>Китай</td>
            <td align="right">0.44</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Масло</td>
            <td align="right">742</td>
            <td align="right">15</td>
            <td>&quot;Полесье&quot;</td>
            <td>Киев</td>
            <td>Украина</td>
            <td align="right">1.62</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Зелень</td>
            <td align="right">18</td>
            <td align="right">15</td>
            <td>&quot;Наталка&quot;</td>
            <td>Киев</td>
            <td>Украина</td>
            <td align="right">0.88</td>
        </tr>
        </tbody>
    </table>
    <ol class="double compact">
        <li>Избыточность</li>
        <li>Потенциальная противоречивость<br/>(аномалии обновления)</li>
        <li>Аномалии включения</li>
        <li>Аномалии удаления</li>
    </ol>
</section>

<section class="slide">
    <h2>Концептуальное проектирование</h2>
    <h3>Выявление сущностей и связей</h3>
    <div style="text-align: center; height: 100%">
        <img style="height: 70%" src="scheme-05.png"/>
    </div>
</section>

<section class="slide">
    <h2>Структура таблицы тем</h2>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>Заголовок</th>
            <th>Дата</th>
            <th>Автор</th>
            <th>E-Mail</th>
            <th>Текст</th>
            <th>Оценка</th>
            <th>Ответы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Руслан и Людмила</td>
            <td>01.01.1820</td>
            <td>Пушкин А.С.</td>
            <td>sukin_syn@mail.ru</td>
            <td>…</td>
            <td>500</td>
            <td>120</td>
        </tr>
        <tr>
            <td>Война и Мир</td>
            <td>01.03.1869</td>
            <td>Толстой Л.Н.</td>
            <td>tolstoy@inbox.ru</td>
            <td>…</td>
            <td>100</td>
            <td>345</td>
        </tr>
        <tr>
            <td>Отцы и Дети</td>
            <td>15.08.1862</td>
            <td>Иван Тургенев</td>
            <td>nedobobov@mail.ru</td>
            <td>…</td>
            <td>256</td>
            <td>18</td>
        </tr>
        <tr>
            <td>Повести Белкина</td>
            <td>12.06.1830</td>
            <td>Пушкин А.С.</td>
            <td>sukin_syn@mail.ru</td>
            <td>…</td>
            <td>400</td>
            <td>96</td>
        </tr>
        <tr>
            <td>Муму</td>
            <td>10.11.1852</td>
            <td>Иван Тургенев</td>
            <td>nedobobov@mail.ru</td>
            <td>…</td>
            <td>312</td>
            <td>46</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>Справочник пользователей</h2>
    <img src="user-form.png" style="float: right; width: 50%"/>
    <dl style="font-size: 75%">
        <dt>Нормальная форма</dt>
        <dd>Свойство отношения в реляционной модели данных, характеризующее его с точки зрения избыточности,
            потенциально приводящей к логически ошибочным результатам выборки или изменения данных. Нормальная форма
            определяется как совокупность требований, которым должно удовлетворять отношение.
        </dd>
    </dl>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Пароль</th>
            <th>Имя</th>
            <th>Дата</th>
            <th>Привилегии</th>
            <th>Разделы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Админ, Модератор</td>
            <td>Новости, Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
            <td>Модератор</td>
            <td>Флуд, Юмор</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>*****</td>
            <td>Федор Михайлович</td>
            <td>11.11.1821</td>
            <td>Игрок</td>
            <td>E-Mail</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>*****</td>
            <td>Пушкин А.С.</td>
            <td>06.06.1799</td>
            <td>Админ</td>
            <td>Поэзия</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>1-ая нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится в первой нормальной форме (1НФ) тогда и только тогда, когда
        в любом допустимом значении отношения каждый его кортеж содержит только одно значение для каждого из атрибутов.
    </p>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Пароль</th>
            <th>Имя</th>
            <th>Дата</th>
            <th>Привилегии</th>
            <th>Разделы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Админ, Модератор</td>
            <td>Новости, Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
            <td>Модератор</td>
            <td>Флуд, Юмор</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>*****</td>
            <td>Федор Михайлович</td>
            <td>11.11.1821</td>
            <td>Игрок</td>
            <td>E-Mail</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>*****</td>
            <td>Пушкин А.С.</td>
            <td>06.06.1799</td>
            <td>Админ</td>
            <td>Поэзия</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>1-ая нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится в первой нормальной форме (1НФ) тогда и только тогда, когда
        в любом допустимом значении отношения каждый его кортеж содержит только одно значение для каждого из атрибутов.
    </p>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Пароль</th>
            <th>Имя</th>
            <th>Дата</th>
            <th>Привилегии</th>
            <th>Разделы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Админ</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Админ</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Модератор</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
            <td>Модератор</td>
            <td>Юмор</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>*****</td>
            <td>Федор Михайлович</td>
            <td>11.11.1821</td>
            <td>Игрок</td>
            <td>E-Mail</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>*****</td>
            <td>Пушкин А.С.</td>
            <td>06.06.1799</td>
            <td>Админ</td>
            <td>Поэзия</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>2-ая нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится во второй нормальной форме тогда и только тогда, когда она
        находится в первой нормальной форме, и каждый неключевой атрибут неприводимо зависит от ее потенциального ключа.
    </p>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Пароль</th>
            <th>Имя</th>
            <th>Дата</th>
            <th>Привилегии</th>
            <th>Разделы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Админ</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Админ</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Модератор</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
            <td>Модератор</td>
            <td>Юмор</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>*****</td>
            <td>Федор Михайлович</td>
            <td>11.11.1821</td>
            <td>Игрок</td>
            <td>E-Mail</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>*****</td>
            <td>Пушкин А.С.</td>
            <td>06.06.1799</td>
            <td>Админ</td>
            <td>Поэзия</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>2-ая нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится во второй нормальной форме тогда и только тогда, когда она
        находится в первой нормальной форме, и каждый неключевой атрибут неприводимо зависит от ее потенциального ключа.
    </p>
    <table class="classic bordered" style="font-size: 60%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Пароль</th>
            <th>Имя</th>
            <th>Дата</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>*****</td>
            <td>Толстой Л.Н.</td>
            <td>09.09.1828</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>*****</td>
            <td>Николай Щедрин</td>
            <td>27.01.1826</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>*****</td>
            <td>Федор Михайлович</td>
            <td>11.11.1821</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>*****</td>
            <td>Пушкин А.С.</td>
            <td>06.06.1799</td>
        </tr>
        </tbody>
    </table>
    <table class="classic bordered" style="font-size: 60%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Привилегии</th>
            <th>Разделы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Админ</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Админ</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Модератор</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>Модератор</td>
            <td>Юмор</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>Игрок</td>
            <td>E-Mail</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>Админ</td>
            <td>Поэзия</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>3-я нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится в третьей нормальной форме, когда она находится во второй
        нормальной форме, и отсутствуют транзитивные функциональные зависимости неключевых атрибутов от ключевых.
    </p>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>TopicId</th>
            <th>Заголовок</th>
            <th>Дата</th>
            <th>E-Mail</th>
            <th>Автор</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>5</td>
            <td>Руслан и Людмила</td>
            <td>01.01.1820</td>
            <td>sukin_syn@mail.ru</td>
            <td>Пушкин А.С.</td>
        </tr>
        <tr>
            <td>8</td>
            <td>Война и Мир</td>
            <td>01.03.1869</td>
            <td>tolstoy@inbox.ru</td>
            <td>Толстой Л.Н.</td>
        </tr>
        <tr>
            <td>12</td>
            <td>Отцы и Дети</td>
            <td>15.08.1862</td>
            <td>nedobobov@mail.ru</td>
            <td>Иван Тургенев</td>
        </tr>
        <tr>
            <td>43</td>
            <td>Повести Белкина</td>
            <td>12.06.1830</td>
            <td>sukin_syn@mail.ru</td>
            <td>Пушкин А.С.</td>
        </tr>
        <tr>
            <td>16</td>
            <td>Муму</td>
            <td>10.11.1852</td>
            <td>nedobobov@mail.ru</td>
            <td>Иван Тургенев</td>
        </tr>
    </table>
</section>

<section class="slide">
    <h2>3-я нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится в третьей нормальной форме, когда она находится во второй
        нормальной форме, и отсутствуют транзитивные функциональные зависимости неключевых атрибутов от ключевых.
    </p>
    <table class="classic bordered" style="font-size: 70%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Автор</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>Пушкин А.С.</td>
        </tr>
        <tr>
            <td>tolstoy@inbox.ru</td>
            <td>Толстой Л.Н.</td>
        </tr>
        <tr>
            <td>nedobobov@mail.ru</td>
            <td>Иван Тургенев</td>
        </tr>
    </table>
    <table class="classic bordered" style="font-size: 60%">
        <thead>
        <tr>
            <th>TopicID</th>
            <th>Заголовок</th>
            <th>Дата</th>
            <th>Автор</th>
            <th>E-Mail</th>
            <th>Текст</th>
            <th>Оценка</th>
            <th>Ответы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>5</td>
            <td>Руслан и Людмила</td>
            <td>01.01.1820</td>
            <td>Пушкин А.С.</td>
            <td>sukin_syn@mail.ru</td>
            <td>…</td>
            <td>500</td>
            <td>120</td>
        </tr>
        <tr>
            <td>8</td>
            <td>Война и Мир</td>
            <td>01.03.1869</td>
            <td>Толстой Л.Н.</td>
            <td>tolstoy@inbox.ru</td>
            <td>…</td>
            <td>100</td>
            <td>345</td>
        </tr>
        <tr>
            <td>12</td>
            <td>Отцы и Дети</td>
            <td>15.08.1862</td>
            <td>Иван Тургенев</td>
            <td>nedobobov@mail.ru</td>
            <td>…</td>
            <td>256</td>
            <td>18</td>
        </tr>
        <tr>
            <td>43</td>
            <td>Повести Белкина</td>
            <td>12.06.1830</td>
            <td>Пушкин А.С.</td>
            <td>sukin_syn@mail.ru</td>
            <td>…</td>
            <td>400</td>
            <td>96</td>
        </tr>
        <tr>
            <td>16</td>
            <td>Муму</td>
            <td>10.11.1852</td>
            <td>Иван Тургенев</td>
            <td>nedobobov@mail.ru</td>
            <td>…</td>
            <td>312</td>
            <td>46</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>4-ая нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится в четвёртой нормальной форме, если она находится в третьей
        нормальной форме и не содержит нетривиальных многозначных зависимостей.
    </p>
    <table class="classic bordered" style="font-size: 80%">
        <thead>
        <tr>
            <th>E-Mail</th>
            <th>Привилегии</th>
            <th>Разделы</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Админ</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Админ</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Модератор</td>
            <td>Новости</td>
        </tr>
        <tr>
            <td>tolstoy@mail.ru</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>Модератор</td>
            <td>Флуд</td>
        </tr>
        <tr>
            <td>saltykov@inbox.ru</td>
            <td>Модератор</td>
            <td>Юмор</td>
        </tr>
        <tr>
            <td>fmd@mail.ru</td>
            <td>Игрок</td>
            <td>E-Mail</td>
        </tr>
        <tr>
            <td>sukin_syn@mail.ru</td>
            <td>Админ</td>
            <td>Поэзия</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>4-ая нормальная форма</h2>
    <p style="font-size: 80%">Переменная отношения находится в четвёртой нормальной форме, если она находится в третьей
        нормальной форме и не содержит нетривиальных многозначных зависимостей.
    </p>
    <div style="display: table; width: 100%">
        <div style="display: table-cell; padding-right: 10px">
            <table class="classic bordered" style="font-size: 80%">
                <thead>
                <tr>
                    <th>E-Mail</th>
                    <th>Привилегии</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>tolstoy@mail.ru</td>
                    <td>Админ</td>
                </tr>
                <tr>
                    <td>tolstoy@mail.ru</td>
                    <td>Модератор</td>
                </tr>
                <tr>
                    <td>saltykov@inbox.ru</td>
                    <td>Модератор</td>
                </tr>
                <tr>
                    <td>fmd@mail.ru</td>
                    <td>Игрок</td>
                </tr>
                <tr>
                    <td>sukin_syn@mail.ru</td>
                    <td>Админ</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div style="display: table-cell">
            <table class="classic bordered" style="font-size: 80%">
                <thead>
                <tr>
                    <th>E-Mail</th>
                    <th>Разделы</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>tolstoy@mail.ru</td>
                    <td>Новости</td>
                </tr>
                <tr>
                    <td>tolstoy@mail.ru</td>
                    <td>Флуд</td>
                </tr>
                <tr>
                    <td>saltykov@inbox.ru</td>
                    <td>Флуд</td>
                </tr>
                <tr>
                    <td>saltykov@inbox.ru</td>
                    <td>Юмор</td>
                </tr>
                <tr>
                    <td>fmd@mail.ru</td>
                    <td>E-Mail</td>
                </tr>
                <tr>
                    <td>sukin_syn@mail.ru</td>
                    <td>Поэзия</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>

<section class="slide">
    <h2>Реляционная часть</h2>
    <ul>
        <li style="clear: both"><img src="relation-11.svg" style="float: right"/>один-к-одному (1:1)</li>
        <li style="clear: both"><img src="relation-1m.svg" style="float: right"/>один-ко-многим (1:M)</li>
        <li style="clear: both"><img src="relation-m1.svg" style="float: right"/>многие-к-одному (M:1)</li>
        <li style="clear: both"><img src="relation-mn.svg" style="float: right"/>многие-ко-многим (M:N)</li>
    </ul>
</section>

<section class="slide">
    <h2>CREATE TABLE</h2>
    <pre style="font-size: 90%"><code class="sql">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    (create_definition,...)
    [table_options]
    [partition_options]
</code></pre>
    <p>Or:</p>
    <pre style="font-size: 90%"><code class="sql">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    [(create_definition,...)]
    [table_options]
    [partition_options]
    select_statement
</code></pre>
    <p>Or:</p>
    <pre style="font-size: 90%"><code class="sql">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    { LIKE old_tbl_name | (LIKE old_tbl_name) }
</code></pre>
</section>

<section class="slide">
    <h2>create_definition</h2>
    <pre><code style="font-size: 80%" class="sql">create_definition:
    col_name column_definition
  | [CONSTRAINT [symbol]] PRIMARY KEY [index_type] (index_col_name,...)
      [index_option] ...
  | {INDEX|KEY} [index_name] [index_type] (index_col_name,...)
      [index_option] ...
  | [CONSTRAINT [symbol]] UNIQUE [INDEX|KEY]
      [index_name] [index_type] (index_col_name,...)
      [index_option] ...
  | {FULLTEXT|SPATIAL} [INDEX|KEY] [index_name] (index_col_name,...)
      [index_option] ...
  | [CONSTRAINT [symbol]] FOREIGN KEY
      [index_name] (index_col_name,...) reference_definition
  | CHECK (expr)
</code></pre>
</section>

<section class="slide">
    <h2>column_definition, reference_definition</h2>
    <pre><code style="font-size: 80%" class="sql">column_definition:
    data_type [NOT NULL | NULL] [DEFAULT default_value]
      [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY]
      [COMMENT 'string']
      [COLUMN_FORMAT {FIXED|DYNAMIC|DEFAULT}]
      [STORAGE {DISK|MEMORY|DEFAULT}]
      [reference_definition]
 
reference_definition:
    REFERENCES tbl_name (index_col_name,...)
      [ON DELETE reference_option]
      [ON UPDATE reference_option]
 
reference_option:
    RESTRICT | CASCADE | SET NULL | NO ACTION
</code></pre>
</section>

<section class="slide">
    <h2>Обновление кортежа в родительском отношении</h2>
    <img src="cascade.jpg" style="float: right"/>
    <dl>
        <dt>RESTRICT, NO ACTION</dt>
        <dd>Не разрешать изменение</dd>

        <dt>CASCADE</dt>
        <dd>Изменить каскадно</dd>

        <dt>SET NULL</dt>
        <dd>Установить в NULL</dd>

        <dt>SET DEFAULT</dt>
        <dd>Установить значение по умолчанию</dd>
    </dl>
</section>

<section class="slide">
    <h2>CREATE TABLE (пример)</h2>
    <pre style="font-size: 90%"><code class="sql">CREATE TABLE shop (
    article INT(4) UNSIGNED ZEROFILL DEFAULT '0000' NOT NULL,
    dealer  VARCHAR(20) DEFAULT '' NOT NULL,
    price   DECIMAL(16, 2) DEFAULT 0.00 NOT NULL,
    PRIMARY KEY pk_shop (article, dealer)
) ENGINE = InnoDB;

CREATE TABLE test (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    UNIQUE KEY (article)
) ENGINE = InnoDB AS SELECT article, dealer, price FROM shop;
</code></pre>
</section>

<section class="slide">
    <h2>ALTER TABLE</h2>
    <pre style="font-size: 65%"><code class="sql">ALTER [IGNORE] TABLE tbl_name
    [alter_specification [, alter_specification] ...]
    [partition_options]

alter_specification:
    table_options
| ADD [COLUMN] (col_name column_definition,...)
| ADD [CONSTRAINT [symbol]] PRIMARY KEY
        [index_type] (index_col_name,...) [index_option] ...
| ADD [CONSTRAINT [symbol]]
        FOREIGN KEY [index_name] (index_col_name,...)
        reference_definition
  | CHANGE [COLUMN] old_col_name new_col_name column_definition
        [FIRST|AFTER col_name]
  | MODIFY [COLUMN] col_name column_definition
        [FIRST | AFTER col_name]
  | DROP [COLUMN] col_name
  | DROP PRIMARY KEY
  | DROP FOREIGN KEY fk_symbol
  | DISABLE KEYS
  | ENABLE KEYS
  | RENAME [TO|AS] new_tbl_name
  | ORDER BY col_name [, col_name] ...
</code></pre>
</section>

<section class="slide">
    <h2>INFORMATION_SCHEMA</h2>
    <ul class="double compact" style="font-size: 90%">
        <li>CHARACTER_SETS</li>
        <li>COLLATIONS</li>
        <li>COLUMNS</li>
        <li>COLUMN_PRIVILEGES</li>
        <li>ENGINES</li>
        <li>EVENTS</li>
        <li>GLOBAL_STATUS and SESSION_STATUS</li>
        <li>GLOBAL_VARIABLES and SESSION_VARIABLES</li>
        <li>KEY_COLUMN_USAGE</li>
        <li>PARTITIONS</li>
        <li>PLUGINS</li>
        <li>PROCESSLIST</li>
        <li>PROFILING</li>
        <li>REFERENTIAL_CONSTRAINTS</li>
        <li>ROUTINES</li>
        <li>SCHEMATA</li>
        <li>SCHEMA_PRIVILEGES</li>
        <li>STATISTICS</li>
        <li>TABLES</li>
        <li>TABLE_CONSTRAINTS</li>
        <li>TABLE_PRIVILEGES</li>
        <li>TRIGGERS</li>
        <li>USER_PRIVILEGES</li>
        <li>VIEWS</li>
    </ul>
</section>

<section class="slide">
    <h2>INFORMATION_SCHEMA: TABLES</h2>
    <ul class="double compact">
        <li>TABLE_CATALOG</li>
        <li>TABLE_SCHEMA</li>
        <li>TABLE_NAME</li>
        <li>TABLE_TYPE</li>
        <li>ENGINE</li>
        <li>VERSION</li>
        <li>ROW_FORMAT</li>
        <li>TABLE_ROWS</li>
        <li>AVG_ROW_LENGTH</li>
        <li>DATA_LENGTH</li>
        <li>MAX_DATA_LENGTH</li>
        <li>INDEX_LENGTH</li>
        <li>DATA_FREE</li>
        <li>AUTO_INCREMENT</li>
        <li>CREATE_TIME</li>
        <li>UPDATE_TIME</li>
        <li>CHECK_TIME</li>
        <li>TABLE_COLLATION</li>
        <li>CHECKSUM</li>
        <li>CREATE_OPTIONS</li>
        <li>TABLE_COMMENT</li>
    </ul>
</section>

<section class="slide">
    <h2>INFORMATION_SCHEMA: COLUMNS</h2>
    <ul class="double compact">
        <li>TABLE_CATALOG</li>
        <li>TABLE_SCHEMA</li>
        <li>TABLE_NAME</li>
        <li>COLUMN_NAME</li>
        <li>ORDINAL_POSITION</li>
        <li>COLUMN_DEFAULT</li>
        <li>IS_NULLABLE</li>
        <li>DATA_TYPE</li>
        <li>CHARACTER_MAXIMUM_LENGTH</li>
        <li>CHARACTER_OCTET_LENGTH</li>
        <li>NUMERIC_PRECISION</li>
        <li>NUMERIC_SCALE</li>
        <li>DATETIME_PRECISION</li>
        <li>CHARACTER_SET_NAME</li>
        <li>COLLATION_NAME</li>
        <li>COLUMN_TYPE</li>
        <li>COLUMN_KEY</li>
        <li>EXTRA</li>
        <li>PRIVILEGES</li>
        <li>COLUMN_COMMENT</li>
        <li>GENERATION_EXPRESSION</li>
    </ul>
</section>

<section class="slide">
    <h2>SELECT</h2>
    <pre style="font-size: 90%"><code class="sql">SELECT
    [ALL | DISTINCT | DISTINCTROW ]
      [HIGH_PRIORITY]
      [STRAIGHT_JOIN]
      [SQL_CACHE | SQL_NO_CACHE] [SQL_CALC_FOUND_ROWS]
    select_expr [, select_expr ...]
    [FROM table_references
    [WHERE where_condition]
    [GROUP BY {col_name | expr | position}
      [ASC | DESC], ... [WITH ROLLUP]]
    [HAVING where_condition]
    [ORDER BY {col_name | expr | position}
      [ASC | DESC], ...]
    [LIMIT {[offset,] row_count | row_count OFFSET offset}]
</code></pre>
</section>

<section class="slide">
    <h2>Типы таблиц</h2>
    <img src="types.jpg" style="float: right"/>
    <ul>
        <li>Постоянные таблицы</li>
        <li>Временные таблицы</li>
        <li>Виртуальные таблицы (представления)</li>
    </ul>
</section>

<section class="slide">
    <h2>Фильтрация</h2>
    <img src="filter.jpg" class="place bottom right" width="400px" style="margin: 50px"/>
    <ul class="compact">
        <li>=</li>
        <li>!=, &lt;&gt;</li>
        <li>&gt;, &lt;, &gt;=, &lt;=</li>
        <li>BETWEEN</li>
        <li>IN</li>
        <li>LIKE (_, %)</li>
        <li>OR</li>
        <li>AND</li>
        <li>NOT</li>
    </ul>
</section>

<section class="slide">
    <h2>JOIN-ы</h2>
    <div style="text-align: center; height: 100%">
        <img style="height: 70%" src="../common/joins.svg"/>
    </div>
</section>

<section class="slide">
    <h2>CASE</h2>
    <img src="case.png" height="250px" style="position: absolute; right: 50px"/>
    <pre style="font-size: 90%"><code class="sql">CASE case_value
    WHEN when_value
        THEN statement_list
    [WHEN when_value
        THEN statement_list] ...
    [ELSE statement_list]
END CASE
</code></pre>
    <p>Or:</p>
    <pre style="font-size: 90%"><code class="sql">CASE
    WHEN search_condition THEN statement_list
    [WHEN search_condition THEN statement_list] ...
    [ELSE statement_list]
END CASE
 
IF (EXP1, EXP2, EXP3)
</code></pre>
</section>

<section class="slide">
    <h2>Формирование групп</h2>
    <ul>
        <li>Группировка по одному столбцу</li>
        <li>Группировка по нескольким столбцам</li>
        <li>Группировка посредством выражений</li>
        <li>WITH ROLLUP</li>
    </ul>
    <pre><code class="sql">SET sql_mode = 'ONLY_FULL_GROUP_BY';</code></pre>
</section>

<section class="slide">
    <h2>Формирование групп</h2>
    <pre><code class="sql">SELECT * FROM employee;</code></pre>
    <table class="classic bordered" style="font-size: 75%">
        <thead>
        <tr>
            <th>id</th>
            <th>name</th>
            <th>department</th>
            <th>grade</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>1</td>
            <td>John</td>
            <td>HR</td>
            <td>A</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Mark</td>
            <td>HR</td>
            <td>A</td>
        </tr>
        <tr>
            <td>3</td>
            <td>Smit</td>
            <td>IT</td>
            <td>A</td>
        </tr>
        <tr>
            <td>4</td>
            <td>Lili</td>
            <td>IT</td>
            <td>B</td>
        </tr>
        <tr>
            <td>5</td>
            <td>Alex</td>
            <td>PR</td>
            <td>B</td>
        </tr>
        <tr>
            <td>6</td>
            <td>Walton</td>
            <td>HR</td>
            <td>B</td>
        </tr>
        <tr>
            <td>7</td>
            <td>Kim</td>
            <td>PR</td>
            <td>B</td>
        </tr>
        <tr>
            <td>8</td>
            <td>Marry</td>
            <td>HR</td>
            <td>A</td>
        </tr>
        <tr>
            <td>9</td>
            <td>Paul</td>
            <td>PR</td>
            <td>C</td>
        </tr>
        <tr>
            <td>10</td>
            <td>Christ</td>
            <td>HR</td>
            <td>A</td>
        </tr>
        <tr>
            <td>11</td>
            <td>Jiji</td>
            <td>HR</td>
            <td>B</td>
        </tr>
        <tr>
            <td>12</td>
            <td>Bob</td>
            <td>PR</td>
            <td>B</td>
        </tr>
        </tbody>
    </table>
</section>
<section class="slide">
    <h2>Формирование групп</h2>
    <pre><code class="sql">SELECT grade, department, COUNT(*)
FROM employee
GROUP BY grade, department WITH ROLLUP;
</code></pre>
    <table class="classic bordered" style="font-size: 75%">
        <thead>
        <tr>
            <th>grade</th>
            <th>department</th>
            <th>COUNT(*)</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>A</td>
            <td>HR</td>
            <td>4</td>
        </tr>
        <tr>
            <td>A</td>
            <td>IT</td>
            <td>1</td>
        </tr>
        <tr>
            <td>A</td>
            <td>
                <null/>
            </td>
            <td>5</td>
        </tr>
        <tr>
            <td>B</td>
            <td>HR</td>
            <td>2</td>
        </tr>
        <tr>
            <td>B</td>
            <td>IT</td>
            <td>1</td>
        </tr>
        <tr>
            <td>B</td>
            <td>PR</td>
            <td>3</td>
        </tr>
        <tr>
            <td>B</td>
            <td>
                <null/>
            </td>
            <td>6</td>
        </tr>
        <tr>
            <td>C</td>
            <td>PR</td>
            <td>1</td>
        </tr>
        <tr>
            <td>C</td>
            <td>
                <null/>
            </td>
            <td>1</td>
        </tr>
        <tr>
            <td>
                <null/>
            </td>
            <td>
                <null/>
            </td>
            <td>12</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>Агрегаторы</h2>
    <table style="font-size: 80%">
        <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>AVG()
            <td>Return the average value of the argument</td>
        </tr>
        <tr>
            <td>BIT_AND()</td>
            <td>Return bitwise and</td>
        </tr>
        <tr>
            <td>BIT_OR()</td>
            <td>Return bitwise or</td>
        </tr>
        <tr>
            <td>BIT_XOR()</td>
            <td>Return bitwise xor</td>
        </tr>
        <tr>
            <td>COUNT(DISTINCT)</td>
            <td>Return the count of a number of different values</td>
        </tr>
        <tr>
            <td>COUNT()</td>
            <td>Return a count of the number of rows returned</td>
        </tr>
        <tr>
            <td>GROUP_CONCAT()</td>
            <td>Return a concatenated string</td>
        </tr>
        <tr>
            <td>MAX()</td>
            <td>Return the maximum value</td>
        </tr>
        <tr>
            <td>MIN()</td>
            <td>Return the minimum value</td>
        </tr>
        <tr>
            <td>STD()</td>
            <td>Return the population standard deviation</td>
        </tr>
        <tr>
            <td>STDDEV()</td>
            <td>Return the population standard deviation</td>
        </tr>
        <tr>
            <td>SUM()</td>
            <td>Return the sum</td>
        <tr>
            <td>VARIANCE()</td>
            <td>Return the population standard variance</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>HAVING</h2>
    <pre><code class="sql">SELECT
    column_name, aggregate_function(column_name)
FROM
    table_name
WHERE
    column_name operator value
GROUP BY
    column_name
HAVING
    aggregate_function(column_name) operator value
</code></pre>
</section>

<section class="slide">
    <h2>ORDER BY, LIMIT</h2>
    <pre><code class="sql">ORDER BY {col_name | expr | position}
    [ASC | DESC], ...
</code></pre>
    <div style="text-align: right">
        <img src="order-by.png" height="300px"/>
    </div>
    <pre><code class="sql">LIMIT {[offset,] row_count | row_count OFFSET offset}
</code></pre>
</section>

<section class="slide">
    <h2>INSERT</h2>
    <pre style="font-size: 90%"><code class="sql">INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    {VALUES | VALUE} ({expr | DEFAULT},...),(...),...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ]
</code></pre>
    <p>Есть еще специфичный для MySQL вариант:</p>
    <pre style="font-size: 90%"><code class="sql">INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name
    SET col_name={expr | DEFAULT}, ...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ]
</code></pre>
</section>

<section class="slide">
    <h2>INSERT</h2>
    <pre style="font-size: 90%"><code class="sql">INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ]
</code></pre>
</section>

<section class="slide">
    <h2>INSERT</h2>
    <pre style="font-size: 90%"><code class="sql">INSERT INTO tbl_temp2 (fld_id)
    SELECT
        tbl_temp1.fld_order_id
    FROM
        tbl_temp1
    WHERE
        tbl_temp1.fld_order_id > 100;
 
INSERT INTO table (a, b, c) VALUES (1, 2, 3)
    ON DUPLICATE KEY UPDATE c = c + 1;
 
INSERT INTO table (a, b, c) VALUES (1, 2, 3), (4, 5, 6)
    ON DUPLICATE KEY UPDATE c = VALUES(a) + VALUES(b);
</code></pre>
</section>

<section class="slide">
    <h2>UPDATE</h2>
    <pre style="font-size: 90%"><code class="sql">UPDATE [LOW_PRIORITY] [IGNORE] table_reference
    SET    col_name1={expr1|DEFAULT}
        [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count]
</code></pre>
    <p>Multiple-table syntax:</p>
    <pre style="font-size: 90%"><code class="sql">UPDATE [LOW_PRIORITY] [IGNORE] table_references
    SET    col_name1={expr1|DEFAULT}
        [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
</code></pre>
</section>

<section class="slide">
    <h2>UPDATE</h2>
    <pre><code class="sql">UPDATE table1
SET
    col_name1 = col_name2,
    col_name2 = col_name1
</code></pre>
    <div class="next" style="padding-top: 10px; padding-bottom: 10px">
        <h3><a href="http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt">SQL92</a>
            (13.9 &lt;update statement: positioned&gt;):</h3>
        <p style="font-size: 80%">
            6. The &lt;value expression&gt;s are effectively evaluated before updating the object row. If a &lt;value
            expression&gt; contains a reference to a column of T, then the reference is to the value of that column in
            the
            object row before any value of the object row is updated.
        </p>
    </div>
    <pre class="next"><code class="sql">UPDATE table1
SET
    col_name1 = (@swap := col_name1),
    col_name1 = col_name2,
    col_name2 = @swap
</code></pre>
</section>

<section class="slide">
    <h2>DELETE</h2>
    <pre style="font-size: 90%"><code class="sql">DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM tbl_name
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count]
</code></pre>
    <p>Multiple-table syntax (MySQL only):</p>
    <pre style="font-size: 90%"><code class="sql">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    tbl_name[.*] [, tbl_name[.*]] ...
    FROM table_references
    [WHERE where_condition]
</code></pre>
    <p>Or:</p>
    <pre style="font-size: 90%"><code class="sql">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    FROM tbl_name[.*] [, tbl_name[.*]] ...
    USING table_references
    [WHERE where_condition]
</code></pre>
</section>

<section class="slide">
    <h2>DELETE</h2>
    <pre style="font-size: 75%"><code class="sql">DELETE FROM t1
WHERE
    t1.id IN (SELECT t2.id FROM t2);
</code></pre>
    <div class="next">
        <p>Or:</p>
        <pre style="font-size: 75%"><code class="sql">DELETE t1, t2
FROM
    t1 INNER JOIN t2
    INNER JOIN t3
WHERE
    t1.id = t2.id AND t2.id = t3.id;
</code></pre>
        <p>Or:</p>
        <pre style="font-size: 75%"><code class="sql">DELETE FROM t1, t2
USING
    t1 INNER JOIN t2
    INNER JOIN t3
WHERE
    t1.id = t2.id AND t2.id = t3.id;
</code></pre>
    </div>
</section>

<section class="slide">
    <h2>Список смежных вершин (Adjacency List)</h2>
    <div style="text-align: center; height: 100%">
        <img style="height: 70%" src="tree-al.png"/>
    </div>
</section>

<section class="slide">
    <h2>Список смежных вершин (Adjacency List)</h2>
    <div style="font-size: 85%">
        <p>Главный недостаток такого подхода — необходимо достоверно знать количество уровней вложенности в вашей
            иерархии, кроме того, чем больше иерархия, тем больше JOIN'ов — тем ниже производительность.</p>
        <p>Тем не менее, данный способ обладает и существенными достоинствами — в дерево легко вносить изменения, менять
            местами и удалять узлы.</p>
        <p>Данный алгоритм хорошо применим, если вы оперируете с небольшими древовидными структурами, которые часто
            поддаются изменениям.</p>
        <p>С другой стороны, этот алгоритм также довольно уверенно себя чувствует и с большими деревьями, если считывать
            их порциями вида «знаю родителя — прочитать всех наследников». Хороший пример такого случая — динамически
            подгружаемые деревья.</p>
        <p>Однако он плохо применим, когда нужно вычитывать какие-либо иные куски дерева, находить пути, предыдущие и
            следующие узлы при обходе и вычитывать ветки дерева целиком (на всю глубину).</p>
    </div>
</section>

<section class="slide">
    <h2>Вложенное множество (Nested Set)</h2>
    <div style="text-align: center; height: 100%">
        <img style="height: 70%" src="tree-ns.png"/>
    </div>
</section>

<section class="slide">
    <h2>Вложенное множество (Nested Set)</h2>
    <div>
        <p>Nested Set действительно хорош, когда нам необходимо считывать структуру деревьев из БД. При этом он
            одинаково хорош для деревьев любого объема.</p>
        <p>Тем не менее, для иерархических структур, которые подвергаются частому изменению он, очевидно, не будет
            являться оптимальным выбором.</p>
    </div>
</section>

<section class="slide">
    <h2>Материализованный путь (Materialized Path)</h2>
    <div style="text-align: center; height: 100%">
        <img style="height: 70%" src="tree-mp.png"/>
    </div>
</section>

<section class="slide">
    <h2>Материализованный путь (Materialized Path)</h2>
    <div style="font-size: 90%">
        <p>Во-первых, по сравнению с Nested Set, он более поддается изменениям. В то же время остается достаточно
            удобным для выборки деревьев целиком и их частей. Но, и он не идеален. Особенно по части поиска предков
            ветки.</p>
        <p>Использование именно этого алгоритма может быть заметно удобнее, для деревьев, над которыми часто
            выполняются как операции чтения, так и изменения.</p>
        <p>Алгоритм довольно уверенно себя чувствует на достаточно больших объемах данных.</p>
        <p>Наиболее неприятной в данном алгоритме будет операция вставки узла в середину уже существующей структуры и
            перенос одной ветки в другую.</p>
        <p>А вот удаление, добавление в конец или изменение узла — это операции довольно простые, и, как правило, не
            вызывают сложностей в данной модели.</p>
    </div>
</section>

<section class="slide">
    <h2>Комбинированный подход</h2>
    <p>По сути вопроса следует отметить, что скомбинировать приведенные методы можно лишь в двух направлениях:</p>
    <ul>
        <li>Списки смежности + материализованный путь (Adjacency List + Materialized Path)</li>
        <li>Списки смежности + вложенные множества (Adjacency List + Nested Set)</li>
    </ul>
    <p>Комбинировать же Nested Set и Materialized Path особого смысла не имеет, т.к. существенного выигрыша ни в
        чтении, ни в записи вы не получите.</p>
</section>

<section class="slide">
    <h2>Adjacency List + Materialized Path</h2>
    <h3>Для AL при использовании с MP:</h3>
    <ul>
        <li>Улучшаются операции выборки ветвей и поддеревьев целиком;</li>
        <li>Ухудшаются операции переноса ветвей.</li>
    </ul>
    <h3>Для MP при использовании с AL:</h3>
    <ul>
        <li>Улучшаются операции выборки наследников заданного узла;</li>
        <li>Улучшаются операции выборки родителей заданного узла.</li>
    </ul>
</section>

<section class="slide">
    <h2>Adjacency List + Nested Set</h2>
    <p>Для связки AL+NS взаимовыгодность не столь очевидна.</p>
    <p>В первую очередь это объясняется тем, что недостатки от проблем изменения узлов дерева в модели NS напрочь
        убивают в этой сфере все достоинства AL.</p>
    <p>Это значит, что такую связку следует рассматривать лишь как качественное улучшение поиска родителей и наследников
        заданного узла в алгоритме NS, а также как повышение надежности самого алгоритма (ключи можно всегда перестроить
        в случае порчи — информацию о связях хранит AL).</p>
    <p>Но ведь и это качественное улучшение, хотя и не такое очевидное.</p>
</section>
