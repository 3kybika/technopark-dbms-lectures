---
title: Лекция 5
---
<section class="slide">
<h2>Индексирование</h2>
<div style="font-size: 80%">
<p>Индексы используются для:</p>
<ul>
	<li>Быстрого поиска записей по условию WHERE;</li>
	<li>Для объединения таблиц с посредством JOIN. Необходимо использовать одинаковые типы сравниваемых полей.bo Если для сравнения необходимо произвести преобразование типов, то индексы использоваться не будут;</li>
	<li>Для выбора наименьшего количества совпадений. Если есть множественный индекс, то использоваться будет тот индекс, который находит самое маленький число строк;</li>
	<li>Поиска MAX и MIN значений для ключевых полей;</li>
	<li>Для сортировки и группировки таблиц (……ORDER BY и GROUP BY);</li>
	<li>Для извлечения данных не из таблицы с данными, а из индексного файла. Это возможно только в некоторых случаях, например, когда все извлекаемые поля проиндексированы.</li>
</ul>
</div>
</section>

<section class="slide">
<h2>Индексирование B-tree</h2>
<div style="text-align: center; height: 100%">
	<img style="height: 70%" src="index-btree.png" />
</div>
</section>

<section class="slide">
<h2>Индексирование B-tree (пример)</h2>
<img style="position: absolute; bottom: 50px; right: 50px; height: 380px" src="index-btree-2.png" />
<pre style="font-size: 80%"><code class="sql">CREATE TABLE People (
	last_name varchar(50) not null,
	first_name varchar(50) not null,
	dob date not null,
	gender enum(m, f) not null,
	key (last_name, first_name, dob)
);</code></pre>
</section>

<section class="slide">
<h2>Индексирование B-tree (особенности)</h2>
<div style="font-size: 75%">
<h3>Можно:</h3>
<ul>
	<li>Поиск по полному значению;</li>
	<li>Поиск по самому левому префиксу;</li>
	<li>Поиск по префиксу столбца;</li>
	<li>Поиск по диапазону значений;</li>
	<li>Поиск по полному совпадению одной части и диапазону в другой части;</li>
	<li>Запросы только по индексу.</li>
</ul>
<h3>Нельзя:</h3>
<ul>
	<li>Поиск без использования левой части ключа;</li>
	<li>Нельзя пропускать столбцы;</li>
	<li>Оптимизация после поиска в диапазоне.</li>
</ul>
</div>
</section>
